function updateLocalBuilderTable(key,value,new_key=null){axios.post($("#local-builder-table").data("ajax"),{key:key,new_key:new_key,value:value}).then((function(response){console.log(response),toastr.success(response.data.message)})).catch((function(error){toastr.error("Something went wrong! Please refresh the page.")}))}function deleteLocalBuilderTable(key){axios.delete($("#local-builder-table").data("ajax"),{data:{key:key}}).then((function(response){toastr.success(response.data.message),$("#local-builder-table").DataTable().ajax.reload(null,!1)})).catch((function(error){toastr.error("Something went wrong! Please refresh the page.")}))}function addNewLocalRow(){var tr=`<tr id="serial">\n                <td class="p-2">\n                    <input type="text" name="key[]" value="" class="form-control" placeholder="Enter your key" required>\n                </td>\n                <td class="p-2">\n                    <input type="text" name="label[]" value="" class="form-control"  placeholder="Enter your value" required>\n                </td>\n                <td>\n                    ${$("#build-local").find("tr").length<=1?'<button class="btn btn-success bg-success btn-sm" onclick="addNewLocalRow()" type="button">\n                    <i class="fa fa-plus"></i>\n                </button>':'<button class="btn btn-danger btn-sm" onclick="deleteLocalRow()" type="button">\n                    <i class="fa fa-trash"></i>\n                </button>'}\n                </td>\n            </tr> `;$("#build-local").append(tr)}function deleteLocalRow(){var tr=$(event.target).closest("tr");$("#build-local").find("tr").length<=1?toastr.error("Can't delete the last row!"):tr.remove()}function buildLocalForm(){event.preventDefault();var form=$("#build-local-form"),action=form.attr("action"),data=(form.attr("method"),form.attr("enctype"),new FormData(form[0]));axios.post(action,data).then((function(response){toastr.success(response.data.message),$("#build-local").find("tr:gt(0)").remove(),addNewLocalRow(),$("#local-builder-table").DataTable().ajax.reload(null,!1)})).catch((function(error){toastr.error("Something went wrong! Please refresh the page.")}))}$((function(){addNewLocalRow();var table=$("#local-builder-table").DataTable({responsive:!0,serverSide:!1,processing:!0,saveState:!0,ajax:$("#local-builder-table").data("ajax"),columns:[{data:"key",name:"key",className:"text-start",render:function(data,type,row){return data=data.replace(/_/g," ")}},{data:"value",name:"value",className:"text-start",render:function(data,type,row){return"display"===type?`<div contenteditable="true" class="editable-value" data-key="${row.key}" data-value="${row.value}">`+data+"</div>":data}},{data:null,responsivePriority:-1,render:function(data,type,full,meta){return`<a href="javascript:void(0);" class="btn btn-danger btn-sm" onclick="deleteLocalBuilderTable('${data.key}')"  title="Delete"><i class="fa fa-trash"></i></a>`},orderable:!1,searchable:!1}],dom:"<'row mb-3'<'col-md-4'l><'col-md-4 text-center'B><'col-md-4'f>>rt<'bottom'<'row'<'col-md-6'i><'col-md-6'p>>><'clear'>",buttons:[{extend:"reset",className:"btn btn-success box-shadow--4dp btn-sm-menu"},{extend:"reload",className:"btn btn-success box-shadow--4dp btn-sm-menu"}]});table.on("blur","div.editable-key",(function(){let orginal_key=$(this).data("key"),orginal_value=$(this).data("value");var newKey=$(this).text();newKey!==orginal_key&&updateLocalBuilderTable(orginal_key,orginal_value,newKey)})),table.on("blur","div.editable-value",(function(){let orginal_key=$(this).data("key"),orginal_value=$(this).data("value");var value=$(this).text();value!==orginal_value&&updateLocalBuilderTable(orginal_key,value)}))}));