"use strict";$((function(){$(".localize").each((function(){$(this).text(localize($(this).text()))}))}));const localExpireTime=864e5,getLocalizeUrl=document.querySelector("meta[name='get-localize']").getAttribute("content");var localizeData=null,localSetTime=null;function getLocalKey(){return"local_"+($("html").attr("lang")??"en")}function getLocalizeData(key=null){if(key=key??getLocalKey(),!localizeData){let localize=localStorage.getItem(key);try{localizeData=JSON.parse(localize)||{}}catch(error){localizeData={}}}localSetTime||(localSetTime=localStorage.getItem(key+"_set_time")??null);var currentTime=(new Date).getTime();return localizeData&&localSetTime&&"object"==typeof localizeData&&currentTime-localSetTime<localExpireTime?localizeData:{}}function refreshLocalizeData(){let localize=getLocalizeData();localize&&0!==Object.keys(localize).length||fetch(getLocalizeUrl,{headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content")}}).then((response=>response.json())).then((res=>{storeLocalToLocalStorage(res.data)})).catch((error=>{console.error("Error fetching localization strings.")}))}function storeLocalToLocalStorage(data){let key=getLocalKey();localStorage.setItem(key,JSON.stringify(data)),localStorage.setItem(key+"_set_time",(new Date).getTime()),localizeData=data}function localize(key){if(!key||0===key.length||" "===key||""===key||null===key)return"";const localData=getLocalizeData();let formattedKey=key.trim();if(formattedKey=formattedKey.replace(/[.,\/\\\\\s-]|(["'])/g,"_"),formattedKey=formattedKey.replace(/_+/g,"_"),formattedKey=formattedKey.trim("_"),formattedKey=formattedKey.toLowerCase(),localData){if(localData[formattedKey])return localData[formattedKey];addLocalizationKey(formattedKey)}return key.replace(/_/g," ").replace(/\b\w/g,(l=>l.toUpperCase()))}function _localize(key){return localize(key)}function addLocalizationKey(key){const data={key:key};fetch(getLocalizeUrl,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":$("meta[name='csrf-token']").attr("content")},body:JSON.stringify(data)}).then((response=>response.json())).then((response=>{storeLocalToLocalStorage(response.data)})).catch((error=>{console.error("Error adding localization key.")}))}refreshLocalizeData(),window.localize=localize;